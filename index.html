<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Teilungsverhältnisse – langsam & sichtbar (Zahlen in den Teilen)</title>

<style>
  * { box-sizing:border-box; font-family: system-ui, -apple-system, Segoe UI, sans-serif; }
  body { margin:0; background:#f4f4f4; display:flex; justify-content:center; }
  .app{
    background:#fff; max-width: 940px; width:100%;
    margin:12px; padding:12px; border-radius:10px;
    box-shadow:0 2px 8px rgba(0,0,0,.08);
  }
  h1 { margin: 6px 0 10px; text-align:center; font-size:18px; }

  .top { display:flex; justify-content:flex-end; align-items:center; gap:10px; flex-wrap:wrap; }
  .meta { font-size:12px; color:#555; }

  .card { margin-top:10px; border:1px solid #e5e5e5; border-radius:12px; padding:12px; background:#fff; }
  .cat { font-size:12px; font-weight:900; color:#444; margin-bottom:6px; }
  .title { font-weight:900; font-size:16px; margin-bottom:8px; }
  .text { font-size:14px; color:#222; line-height:1.35; }
  .text b { font-weight:900; }

  .prompt { margin-top:10px; font-weight:900; font-size:14px; color:#222; }

  .answers { display:grid; gap:8px; margin-top:10px; }
  .answer{
    border:1px solid #ccc; border-radius:12px; padding:10px;
    background:#fafafa; cursor:pointer; font-size:14px;
  }
  .answer:hover { background:#f0f0f0; }
  .answer.disabled { pointer-events:none; opacity:.95; }
  .answer.correct { background:#d4edda; border-color:#28a745; }
  .answer.wrong { background:#f8d7da; border-color:#dc3545; }

  .feedback { margin-top:10px; font-weight:900; min-height:22px; }

  .controls { margin-top:12px; display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap; }
  .btn{
    padding:8px 12px; border:none; border-radius:12px;
    background:#007bff; color:#fff; cursor:pointer; font-size:13px;
  }
  .btn:hover { background:#0062cc; }
  .btn.secondary { background:#222; }
  .btn.secondary:hover { background:#000; }
  .btn:disabled { opacity:.5; cursor:not-allowed; }

  /* ===== Visual ===== */
  :root{
    --A: rgba(255, 120, 120, .75);  /* A rot */
    --B: rgba(120, 170, 255, .75);  /* B blau */
    --outline:#333;
    --glow: rgba(255, 215, 0, .9);  /* gelb */
  }
  .visualRow { margin-top:12px; display:flex; gap:14px; align-items:flex-start; flex-wrap:wrap; }
  .vizCard{
    flex:1 1 520px;
    border:1px solid #e5e5e5; border-radius:12px; padding:10px;
    background:#fcfcfc;
  }
  .vizTitle{ font-weight:900; margin-bottom:8px; font-size:13px; color:#222; }
  .barWrap{ position:relative; }
  .bar{
    width:100%; height:62px;
    border:2px solid var(--outline); border-radius:14px;
    overflow:hidden; display:flex; background:#fff;
  }
  .part{
    height:100%;
    border-right:1px solid rgba(0,0,0,.25);
    display:flex; align-items:center; justify-content:center;
    font-weight:900; font-size:16px; color:#111;
    user-select:none;
    position:relative;
    transition: transform .25s ease, filter .25s ease, outline .25s ease, opacity .25s ease;
  }
  .part:last-child{ border-right:none; }
  .partA{ background:var(--A); }
  .partB{ background:var(--B); }
  .part.gray{ filter: grayscale(.55) brightness(.92); opacity:.9; }

  .part.highlight{
    transform: translateY(-2px) scale(1.03);
    outline: 4px solid var(--glow);
    outline-offset:-4px;
    filter: brightness(1.05);
    z-index:1;
  }
  .part .num{
    padding:2px 10px;
    border-radius:999px;
    background: rgba(255,255,255,.75);
    border:1px solid rgba(0,0,0,.25);
    min-width:34px;
    text-align:center;
  }

  /* Pfeil */
  .arrow{
    position:absolute;
    top:-22px;
    width:0; height:0;
    border-left:10px solid transparent;
    border-right:10px solid transparent;
    border-top:16px solid #111;
    filter: drop-shadow(0 2px 0 rgba(0,0,0,.15));
    opacity:0;
    transition: opacity .25s ease, left .25s ease;
  }
  .arrow.show{ opacity:1; }

  .legend{ margin-top:8px; font-size:12px; color:#444; line-height:1.25; }
  .pill{
    display:inline-flex; align-items:center; gap:6px;
    padding:3px 10px; border-radius:999px;
    border:1px solid #ddd; background:#fff; font-weight:900;
    margin-right:8px; margin-bottom:6px;
  }
  .dot{ width:10px; height:10px; border-radius:999px; display:inline-block; border:1px solid rgba(0,0,0,.25); }
  .dotA{ background:var(--A); }
  .dotB{ background:var(--B); }

  /* ===== Erklärung ===== */
  .help{
    margin-top:10px; padding:10px;
    background:#fafafa; border:1px solid #eee; border-radius:12px;
    font-size:13px; color:#333;
    display:none;
  }
  .help b { font-weight:900; }
  .stepsBox{
    margin-top:10px;
    border:1px solid #eee;
    border-radius:12px;
    background:#fff;
    padding:10px;
  }
  .stepLine{
    display:none;
    padding:8px 10px;
    border-radius:12px;
    background:#fafafa;
    border:1px solid #eee;
    margin-top:8px;
    font-size:13px;
    font-weight:800;
  }
  .stepLine.show{ display:block; }
  .miniNote{ font-weight:650; color:#444; margin-top:6px; font-size:12px; }
</style>
</head>

<body>
<div class="app">
  <h1>Teilungsverhältnisse – Aufteilen im Verhältnis</h1>

  <div class="top">
    <div class="meta" id="meta">0 / 0</div>
  </div>

  <div class="card">
    <div class="cat" id="cat"></div>
    <div class="title" id="title"></div>

    <div class="text" id="text"></div>

    <div id="visual" class="visualRow" style="display:none;"></div>

    <div class="prompt" id="prompt" style="display:none;"></div>
    <div id="answers" class="answers"></div>

    <div class="help" id="help"></div>
    <div class="feedback" id="feedback"></div>

    <div class="controls">
      <button class="btn secondary" id="restartBtn">Neu starten</button>
      <button class="btn" id="nextBtn" disabled>Weiter</button>
    </div>
  </div>
</div>

<script>
/* =========================
   Helpers
========================= */
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
function gcd(a,b){
  a=Math.abs(a); b=Math.abs(b);
  while(b){ const t=a%b; a=b; b=t; }
  return a || 1;
}
function simplifyRatio(a,b){
  const g=gcd(a,b);
  return [a/g, b/g];
}
function splitTotal(total, a, b){
  const sum = a + b;
  const one = total / sum;
  return {A: a*one, B: b*one, onePart: one, sumParts: sum};
}
function fmt(x){
  return Number.isInteger(x) ? String(x) : String(Math.round(x*100)/100);
}

/* =========================
   Visual: Balkenmodell + Pfeil
========================= */
function renderBarModel(container, a, b, nameA="A", nameB="B"){
  const [aa, bb] = simplifyRatio(a,b);
  const sum = aa + bb;

  const parts = [];
  for(let i=0;i<sum;i++){
    const isA = i < aa;
    parts.push({label: isA ? nameA : nameB, cls: isA ? "partA" : "partB"});
  }

  container.innerHTML = `
    <div class="vizCard">
      <div class="vizTitle">Balkenmodell: Verhältnis <b>${aa}:${bb}</b></div>

      <div class="barWrap">
        <div class="arrow" id="arrow"></div>
        <div class="bar" id="bar">
          ${parts.map((p,idx) => `
            <div class="part ${p.cls}" data-idx="${idx}" style="width:${(100/sum).toFixed(3)}%">
              <div class="num" data-num="${idx}"></div>
            </div>
          `).join("")}
        </div>
      </div>

      <div class="legend">
        <span class="pill"><span class="dot dotA"></span>${nameA}: ${aa} Teile</span>
        <span class="pill"><span class="dot dotB"></span>${nameB}: ${bb} Teile</span><br>
        Insgesamt: <b>${sum}</b> gleich große Teile
      </div>
    </div>
  `;
  // Start: keine Zahlen in den Teilen
  setAllPartNumbers("");
}

/* ===== Pfeil positionieren ===== */
function showArrowAtIndex(index){
  const bar = document.getElementById("bar");
  const arrow = document.getElementById("arrow");
  if(!bar || !arrow) return;

  const part = bar.querySelector(`.part[data-idx="${index}"]`);
  if(!part) return;

  const rectBar = bar.getBoundingClientRect();
  const rectPart = part.getBoundingClientRect();
  const center = rectPart.left - rectBar.left + rectPart.width/2;

  arrow.style.left = `calc(${center}px - 10px)`;
  arrow.classList.add("show");
}
function hideArrow(){
  const arrow = document.getElementById("arrow");
  if(!arrow) return;
  arrow.classList.remove("show");
}

/* ===== Teile stylen ===== */
function clearPartStyles(){
  const bar = document.getElementById("bar");
  if(!bar) return;
  [...bar.querySelectorAll(".part")].forEach(p => {
    p.classList.remove("highlight","gray");
  });
}
function grayAllExcept(indicesToKeep){
  const keep = new Set(indicesToKeep);
  const bar = document.getElementById("bar");
  if(!bar) return;
  [...bar.querySelectorAll(".part")].forEach(p => {
    const idx = Number(p.dataset.idx);
    p.classList.toggle("gray", !keep.has(idx));
  });
}
function highlightIndex(i){
  const bar = document.getElementById("bar");
  if(!bar) return;
  const p = bar.querySelector(`.part[data-idx="${i}"]`);
  if(p) p.classList.add("highlight");
}
function unhighlightIndex(i){
  const bar = document.getElementById("bar");
  if(!bar) return;
  const p = bar.querySelector(`.part[data-idx="${i}"]`);
  if(p) p.classList.remove("highlight");
}

/* ===== Zahlen in den Teilen ===== */
function setPartNumber(i, val){
  const bar = document.getElementById("bar");
  if(!bar) return;
  const box = bar.querySelector(`.part[data-idx="${i}"] .num`);
  if(box) box.textContent = val;
}
function setAllPartNumbers(val){
  const bar = document.getElementById("bar");
  if(!bar) return;
  [...bar.querySelectorAll(".part .num")].forEach(n => n.textContent = val);
}

/* =========================
   Langsame Animation (sichtbar!)
   Phasen:
   0) Ruhe
   1) Teile zählen: 1..sum in die Teile schreiben (nacheinander)
   2) 1 Teil zeigen: nur ein Teil farbig + Pfeil + Zahl pro Teil in ALLE Teile schreiben (z.B. 2 2 2 2 2)
   3) A markieren
   4) B markieren
========================= */
let timers = [];
function stopAnimation(){
  timers.forEach(t => clearTimeout(t));
  timers = [];
  hideArrow();
  clearPartStyles();
}

function animateSolution(s){
  stopAnimation();

  const [aa, bb] = simplifyRatio(s.a, s.b);
  const sum = aa + bb;

  const calc = splitTotal(s.total, aa, bb); // onePart, A, B
  const one = fmt(calc.onePart);

  // Help-Box vorbereiten (ohne alles sofort)
  helpEl.style.display = "block";
  helpEl.innerHTML = `
    <div><b>Schritt-für-Schritt (langsam):</b></div>
    <div class="stepsBox">
      <div class="stepLine" id="l0">0) Wir schauen zuerst nur auf das Verhältnis <b>${aa}:${bb}</b>.</div>
      <div class="stepLine" id="l1">1) Teile zählen: <b>${aa} + ${bb} = ${sum}</b> Teile</div>
      <div class="stepLine" id="l2">2) 1 Teil: <b>${s.total}${s.unit}</b> ÷ <b>${sum}</b> = <b>${one}${s.unit}</b> pro Teil</div>
      <div class="stepLine" id="l3a">3a) ${s.nameA}: <b>${aa}</b> Teile → <b>${fmt(calc.A)}${s.unit}</b></div>
      <div class="stepLine" id="l3b">3b) ${s.nameB}: <b>${bb}</b> Teile → <b>${fmt(calc.B)}${s.unit}</b></div>
      <div class="miniNote">Du siehst: Erst Teile, dann „1 Teil“, dann A und B.</div>
    </div>
  `;

  const l0 = document.getElementById("l0");
  const l1 = document.getElementById("l1");
  const l2 = document.getElementById("l2");
  const l3a = document.getElementById("l3a");
  const l3b = document.getElementById("l3b");

  // Zeiten (bewusst langsam)
  const t0 = 600;                 // Ruhe
  const countDelay = 850;         // pro Teil beim Zählen
  const afterCountPause = 900;
  const showOnePartPause = 1600;
  const showAfor = 1700;
  const showBfor = 1700;

  // Phase 0: Ruhe
  timers.push(setTimeout(() => {
    l0.classList.add("show");
    setAllPartNumbers("");
    clearPartStyles();
    hideArrow();
  }, 50));

  // Phase 1: Teile zählen (1..sum in die Teile schreiben)
  timers.push(setTimeout(() => {
    l1.classList.add("show");
  }, t0));

  for(let i=0;i<sum;i++){
    timers.push(setTimeout(() => {
      clearPartStyles();
      hideArrow();
      // Nur aktuelles Teil hervorheben + Zahl setzen
      setPartNumber(i, String(i+1));
      highlightIndex(i);
      showArrowAtIndex(i);
    }, t0 + 300 + i*countDelay));

    // Nach kurzer Zeit wieder "unhighlight" (damit es wirklich einzeln wirkt)
    timers.push(setTimeout(() => {
      unhighlightIndex(i);
    }, t0 + 300 + i*countDelay + 500));
  }

  const endCount = t0 + 300 + (sum-1)*countDelay + afterCountPause;

  // Phase 2: 1 Teil zeigen + überall pro-Teil-Zahl (z.B. 2 2 2 2 2)
  timers.push(setTimeout(() => {
    l2.classList.add("show");
    clearPartStyles();
    // alle Zahlen löschen und dann "one" in alle Teile schreiben
    setAllPartNumbers(one);
    // nur ein Teil farbig lassen (z.B. erstes A-Teil)
    const focusIdx = 0;
    grayAllExcept([focusIdx]);
    highlightIndex(focusIdx);
    showArrowAtIndex(focusIdx);
  }, endCount));

  const endOnePart = endCount + showOnePartPause;

  // Phase 3a: A-Teile markieren
  timers.push(setTimeout(() => {
    l3a.classList.add("show");
    hideArrow();
    clearPartStyles();
    // A-Indizes: 0..aa-1
    const Aidx = [];
    for(let i=0;i<aa;i++) Aidx.push(i);
    grayAllExcept(Aidx);
    Aidx.forEach(i => highlightIndex(i));
    // Pfeil auf Mitte von A-Gruppe (wenn mehrere)
    const midA = Math.floor((aa-1)/2);
    showArrowAtIndex(midA);
  }, endOnePart));

  const endA = endOnePart + showAfor;

  // Phase 3b: B-Teile markieren
  timers.push(setTimeout(() => {
    l3b.classList.add("show");
    hideArrow();
    clearPartStyles();
    const Bidx = [];
    for(let i=aa;i<aa+bb;i++) Bidx.push(i);
    grayAllExcept(Bidx);
    Bidx.forEach(i => highlightIndex(i));
    const midB = aa + Math.floor((bb-1)/2);
    showArrowAtIndex(midB);
  }, endA));

  // Ende: alles normal
  timers.push(setTimeout(() => {
    hideArrow();
    clearPartStyles();
    grayAllExcept([...Array(sum).keys()]); // alle "keep" => keiner grau
    // Trick: keep alle, also niemand grau
    const bar = document.getElementById("bar");
    if(bar){
      [...bar.querySelectorAll(".part")].forEach(p => p.classList.remove("gray"));
    }
  }, endA + showBfor));
}

/* =========================
   Aufgaben (mind. 10), langsam steigern
========================= */
function mkShareMC({cat,title,total,unit,a,b,nameA,nameB,prompt,correctValue,distractors}){
  return {
    type:"mc",
    cat, title,
    total, unit, a, b, nameA, nameB,
    text: `<p>Es gibt <b>${total}${unit}</b>. Aufteilung im Verhältnis <b>${a}:${b}</b> (${nameA} : ${nameB}).</p>`,
    prompt,
    answers: shuffle([
      {t: correctValue + (unit||""), ok:true},
      ...distractors.map(x => ({t: x + (unit||""), ok:false}))
    ])
  };
}

const steps = [
  {
    type:"intro",
    cat:"Start",
    title:"Was passiert bei einer Aufteilung im Verhältnis?",
    text: `
      <p>Wir teilen ein Ganzes im Verhältnis <b>a:b</b>.</p>
      <p>Das bedeutet: Das Ganze besteht aus <b>a+b</b> gleich großen Teilen.</p>
      <p>Nach jeder Antwort läuft eine <b>langsame Animation</b>:</p>
      <p>1) Teile werden gezählt (1,2,3,...)<br>
      2) In jedem Teil steht dann „wie viel 1 Teil ist“ (z.B. 2,2,2,2,2)<br>
      3) A-Teile werden markiert, dann B-Teile</p>
    `
  },

  mkShareMC({ cat:"Level 1", title:"Aufgabe 1", total:5,  unit:"",  a:2,b:3,nameA:"A",nameB:"B",
    prompt:"Wie viele Bonbons bekommt A?", correctValue:"2", distractors:["3","1","5"] }),

  mkShareMC({ cat:"Level 1", title:"Aufgabe 2", total:10, unit:"",  a:2,b:3,nameA:"A",nameB:"B",
    prompt:"Wie viele Bonbons bekommt B?", correctValue:"6", distractors:["4","5","8"] }),

  {
    type:"mc", cat:"Level 1", title:"Aufgabe 3",
    total:15, unit:"", a:2,b:3,nameA:"A",nameB:"B",
    text:`<p>Es gibt <b>15 Bonbons</b>. Aufteilung <b>2:3</b> (A : B).</p>`,
    prompt:"Welche Aufteilung stimmt?",
    answers: shuffle([
      {t:"A: 6   |   B: 9", ok:true},
      {t:"A: 5   |   B: 10", ok:false},
      {t:"A: 7   |   B: 8", ok:false},
      {t:"A: 3   |   B: 12", ok:false}
    ])
  },

  mkShareMC({ cat:"Level 1", title:"Aufgabe 4", total:20, unit:"", a:2,b:3,nameA:"A",nameB:"B",
    prompt:"Wie viele Sticker bekommt A?", correctValue:"8", distractors:["12","10","6"] }),

  {
    type:"yesno", cat:"Level 1", title:"Aufgabe 5",
    total:25, unit:"", a:2,b:3,nameA:"A",nameB:"B",
    text:`<p>Es gibt <b>25 Murmeln</b>. Aufteilung <b>2:3</b> (A : B).</p><p>A bekommt 10 und B bekommt 15.</p>`,
    prompt:"Stimmt das?",
    correctYes:true
  },

  mkShareMC({ cat:"Level 2", title:"Aufgabe 6", total:25, unit:" €", a:1,b:4,nameA:"A",nameB:"B",
    prompt:"Wie viele Euro bekommt A?", correctValue:"5", distractors:["10","20","4"] }),

  mkShareMC({ cat:"Level 2", title:"Aufgabe 7", total:25, unit:"", a:3,b:2,nameA:"A",nameB:"B",
    prompt:"Wie viele Punkte bekommt B?", correctValue:"10", distractors:["15","12","8"] }),

  mkShareMC({ cat:"Level 3", title:"Aufgabe 8", total:50, unit:"", a:4,b:6,nameA:"A",nameB:"B",
    prompt:"Wie viele Bonbons bekommt A?", correctValue:"20", distractors:["30","25","10"] }),

  mkShareMC({ cat:"Level 3", title:"Aufgabe 9", total:56, unit:" cm", a:5,b:2,nameA:"Teil A",nameB:"Teil B",
    prompt:"Wie lang ist Teil B?", correctValue:"16", distractors:["40","14","12"] }),

  mkShareMC({ cat:"Level 4", title:"Aufgabe 10", total:60, unit:" €", a:2,b:3,nameA:"A",nameB:"B",
    prompt:"Wie viele Euro bekommt B?", correctValue:"36", distractors:["24","30","40"] }),

  mkShareMC({ cat:"Level 4", title:"Aufgabe 11", total:30, unit:"", a:1,b:2,nameA:"A",nameB:"B",
    prompt:"Wie viele Karten bekommt A?", correctValue:"10", distractors:["20","15","5"] })
];

/* =========================
   UI
========================= */
let stepIndex = 0;
let answered = false;

const metaEl = document.getElementById("meta");
const catEl = document.getElementById("cat");
const titleEl = document.getElementById("title");
const textEl = document.getElementById("text");
const promptEl = document.getElementById("prompt");
const helpEl = document.getElementById("help");
const answersEl = document.getElementById("answers");
const feedbackEl = document.getElementById("feedback");
const nextBtn = document.getElementById("nextBtn");
const restartBtn = document.getElementById("restartBtn");
const visualEl = document.getElementById("visual");

function setMeta(){ metaEl.textContent = `${stepIndex + 1} / ${steps.length}`; }

function clearScreen(){
  stopAnimation();
  answersEl.innerHTML = "";
  feedbackEl.textContent = "";
  answered = false;
  nextBtn.disabled = true;

  visualEl.style.display = "none";
  visualEl.innerHTML = "";

  promptEl.style.display = "none";
  promptEl.textContent = "";

  helpEl.style.display = "none";
  helpEl.innerHTML = "";
}

function renderStep(){
  clearScreen();
  setMeta();

  const s = steps[stepIndex];
  catEl.textContent = s.cat || "";
  titleEl.textContent = s.title || "";
  textEl.innerHTML = s.text || "";

  if(s.prompt){
    promptEl.style.display = "block";
    promptEl.textContent = s.prompt;
  }

  if(s.type === "intro"){
    nextBtn.disabled = false;
    return;
  }

  // Visual
  visualEl.style.display = "flex";
  renderBarModel(visualEl, s.a, s.b, s.nameA || "A", s.nameB || "B");

  // Answers
  if(s.type === "mc") renderMC(s);
  else if(s.type === "yesno") renderYesNo(s);
}

function afterAnswer(s){
  // animierte Erklärung
  animateSolution(s);
  nextBtn.disabled = false;
}

function renderMC(s){
  const order = shuffle(s.answers.map((_,i)=>i));
  order.forEach((idx) => {
    const a = s.answers[idx];
    const btn = document.createElement("div");
    btn.className = "answer";
    btn.textContent = a.t;

    btn.onclick = () => {
      if(answered) return;
      answered = true;
      [...answersEl.children].forEach(el => el.classList.add("disabled"));

      if(a.ok){
        btn.classList.add("correct");
        feedbackEl.textContent = "Richtig.";
      } else {
        btn.classList.add("wrong");
        feedbackEl.textContent = "Falsch.";
        [...answersEl.children].forEach((el) => {
          const txt = el.textContent;
          const found = s.answers.find(x => x.t === txt);
          if(found && found.ok) el.classList.add("correct");
        });
      }
      afterAnswer(s);
    };

    answersEl.appendChild(btn);
  });
}

function renderYesNo(s){
  const opts = shuffle([
    {t:"Ja", ok: s.correctYes === true},
    {t:"Nein", ok: s.correctYes === false}
  ]);

  opts.forEach(o => {
    const btn = document.createElement("div");
    btn.className = "answer";
    btn.textContent = o.t;

    btn.onclick = () => {
      if(answered) return;
      answered = true;
      [...answersEl.children].forEach(el => el.classList.add("disabled"));

      if(o.ok){
        btn.classList.add("correct");
        feedbackEl.textContent = "Richtig.";
      } else {
        btn.classList.add("wrong");
        feedbackEl.textContent = "Falsch.";
        [...answersEl.children].forEach(el => {
          if((el.textContent==="Ja" && s.correctYes) || (el.textContent==="Nein" && !s.correctYes)){
            el.classList.add("correct");
          }
        });
      }
      afterAnswer(s);
    };

    answersEl.appendChild(btn);
  });
}

/* =========================
   Navigation
========================= */
nextBtn.onclick = () => {
  stepIndex++;
  if(stepIndex >= steps.length) stepIndex = 0;
  renderStep();
};
restartBtn.onclick = () => {
  stepIndex = 0;
  renderStep();
};

renderStep();
</script>
</body>
</html>
